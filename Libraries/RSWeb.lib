RSWeb:
	ChoosingWebsite:=true
	IniRead, WebNames, settings.ini, Web, WebNames
	Loop, Parse, WebNames, `|
	WebName%A_Index%=%A_LoopField%

	Loop, 8
	{
		IniRead, ws%A_Index% , settings.ini, Web, ws%A_Index%
	}

	websearchvar=
	FastSearching:=false
	WebLT := WebLT ? false : true

	If WebLT=0
	{
		GoSub WebLClose
		return
	}
	If WebLT=1
	{
		If (A_ScreenWidth<2000)
		{
			zfont=12
			amultiplier=1
		}
		If (A_ScreenWidth<1800)
		{
			zfont=11
			amultiplier=1
		}
		If (A_ScreenWidth<1600)
		{
			zfont=10
			amultiplier=0.92
		}
		If (A_ScreenWidth<1400)
		{
			zfont=10
			amultiplier=0.87
		}
		If (A_ScreenWidth<1050)
		{
			zfont=9
			amultiplier=0.80
		}

		Gui, WeBL:Destroy
		Gui, WebL:New, +hwndWebL
		Gui, -Border -Caption +AlwaysOnTop +LastFound +ToolWindow

		If SearchBased
		{
			guiw:=520*amultiplier
			guih:=47
			Gui, Color,172326, 172326
			Gui, Font, w300 s13 c909090, Segoe UI Black
			Gui, Add, Text, x16 y11 h45 w95 vGoogleSearchLabel +Hidden, Google:
			Gui, Font, w300 s13 ceeeeee, Segoe UI Black
			Gui, Add, Edit, % "x16 y11 w" guiw-80 " h35 hwndWebSearch vwebsearchvar -E0x200 -VScroll", %websearchvar%
			Gui, Font, w700 s23 ceeeeee, Segoe UI Black
			Gui, Add, Button, % "x+2 y-4 h45 w55 gStartSearch hwndSearchBut1 +Default", •••
			Opt1 := [6, 0x172326, 0x172326, 0x909090]
			Opt2 := [ , 0x172326, 0x172326, 0xffffff]
		}
		else
		{
			guiw:=720*amultiplier
			guih:=204*amultiplier-25
			Gui, Color,1e1e1e, 333333
			Gui, Font, w700 s%zfont% ceeeeee, Segoe UI Black
			Gui, Add, Progress, % "x-1 y-1 w" guiw " h22 Background333333 Disabled hwndHPROG"
			Gui, Add, Edit, % "x0 y4 w" guiw-45 " h25 hwndWebSearch vwebsearchvar -E0x200 +Center -VScroll", %websearchvar%
			Gui, Add, Button, % "x+0 h25 w45 gStartSearch hwndSearchBut1 +Default", Go
			Opt1 := [6, 0x333333, 0x333333, 0xD0D0D0]
			Opt2 := [ , 0x333333, 0x333333, 0xffffff]
		}

		Opt4 := [0, 0xC0A0A0A0, , 0xC0606000]
		ImageButton.Create(SearchBut1, Opt1, Opt2, "", Opt4)
		buth:=(guih)/2-15
		butw:=(guiw)/4

		If !SearchBased
		{
			Opt1 := [6, 0x232323, 0x232323, "White"]
			Opt2 := [ , 0x272727, 0x262626, 0xffffff]
			Opt4 := [0, 0xC0A0A0A0, , 0xC0606000]
			Gui, Add, Button, hwndSCHYT1 gws1 vwebname1 x0 y+0 w%butw% h%buth%, %WebName1%
			ImageButton.Create(SCHYT1, Opt1, Opt2, "", Opt4)

			Gui, Add, Button, hwndSCHYT2 gws2 vwebname2 x+0 w%butw% h%buth%, %WebName2%
			ImageButton.Create(SCHYT2, Opt1, Opt2, "", Opt4)

			Gui, Add, Button, hwndSCHYT3 vwebname3 gws3 x+0 w%butw% h%buth%, %WebName3%
			ImageButton.Create(SCHYT3, Opt1, Opt2, "", Opt4)

			Gui, Add, Button, hwndSCHYT4 vwebname4 gws4 x+0 w%butw% h%buth%, %WebName4%
			ImageButton.Create(SCHYT4, Opt1, Opt2, "", Opt4)

			Gui, Add, Button, hwndSCHYT5 vwebname5 gws5 x0 y+0 w%butw% h%buth%, %WebName5%
			ImageButton.Create(SCHYT5, Opt1, Opt2, "", Opt4)

			Gui, Add, Button, hwndSCHYT6 vwebname6 gws6 x+0 w%butw% h%buth%, %WebName6%
			ImageButton.Create(SCHYT6, Opt1, Opt2, "", Opt4)

			Gui, Add, Button, hwndSCHYT7 vwebname7 gws7 x+0 w%butw% h%buth%, %WebName7%
			ImageButton.Create(SCHYT7, Opt1, Opt2, "", Opt4)

			Gui, Add, Button, hwndSCHYT8 vwebname8 gws8 x+0 w%butw% h%buth% , %WebName8%
			ImageButton.Create(SCHYT8, Opt1, Opt2, "", Opt4)
		}

		guih:=guih*dpi
		guiw:=guiw*dpi
		If SearchBased
		{
			WinSet, Transparent, 245
			WinSet, Region, 0-0 w%guiw% h%guih% r12-12, ahk_id %WebL%
		}
		else
		{
			WinSet, Region, 0-0 w%guiw% h%guih% r18-18, ahk_id %WebL%
			WinSet, Transparent, 0
		}
		guiw:=guiw/dpi
		guih:=guih/dpi
		If RSWebWithSearchFocused || SearchBased
			Gui, Show, h%guih% w%guiw%, %ScriptName% Speed Dial
		else
			Gui, Show, h%guih% w%guiw% NoActivate, %ScriptName% Speed Dial
		ShAutoComplete(WebSearch)
		If !SearchBased
			FadeIn(WebL)
		ChoosingWebsite:=true
	}
return

WebLClose:
WebLGuiEscape:
 	WebLT := false
	FadeOut(WebL)
	ChoosingWebsite:=false
	SearchBased:=false
	RSWebWithSearchFocused:=false
return

WebLGuiContextMenu:

	Loop, 8
	{
		If A_GuiControl=webname%A_Index%
			wnumb=%A_Index%
	}

 	Gui, WebEdit:New, +hwndWebEdit
	Gui, +LastFound
	WinSet, Transparent, 0
	Gui, Margin, 0, 0
	Gui, -Caption
	Gui, Color, 252525, 333333
	Gui, Font, s10 Bold cEEEEEE, Segoe UI
	Gui, Add, Progress, % "x-1 y-1 w300 h26 Background1f1f1f Disabled hwndHPROG"
	Control, ExStyle, -0x20000, , ahk_id %HPROG% ; propably only needed on Win XP
	Gui, Add, Text, x0 y4 w300 Center BackgroundTrans +0x200 cb1b1b1, Edit Website

	Opt1 := [6, 0x252525, 0x252525, "White"]
	Opt2 := [ , 0x252525, 0x444444, 0xffffff]
	Opt4 := [0, 0xC0A0A0A0, , 0xC0606000]

	Gui, Add, Edit, % "x29 y+12 w242 h16 hwndEdit264 v" A_GuiControl " -E0x200 +Center -VScroll", % %A_GuiControl%
	Gui, Add, Edit, % "x29 y+6 w242 h16 hwndEdit265 vws" wnumb " -E0x200 +Center -VScroll", % ws%wnumb%

	Gui, Add, Button, x50 y70 w95 +default gEditWebsites hwndBut1 +Center, Save
	ImageButton.Create(But1, Opt1, Opt2, "", Opt4)

	Gui, Add, Button, x+10 y70 w95 gExitWebsites hwndBut2 +Center, Cancel
	ImageButton.Create(But2, Opt1, Opt2, "", Opt4)
	ShAutoComplete(Edit264)
	ShAutoComplete(Edit265)
	WinSet, Region, 0-0 w300 h100 r12-12, ahk_id %WebEdit%
	Gui, Show, % "w300 h100 y" A_ScreenHeight/2+204*amultiplier/2+20 , Web Edit
	FadeIn(WebEdit)
return

ExitWebsites:
 	FadeOut(WebEdit)
return

EditWebsites:
 Gui, Submit, NoHide
	Loop, 8
	{
		IniWrite, % ws%A_Index% , settings.ini, Web, ws%A_Index%
	}
	WebNames:= WebName1 "|" WebName2 "|" WebName3 "|" WebName4 "|" WebName5 "|" WebName6 "|" WebName7 "|" WebName8
	IniWrite, %WebNames%, settings.ini, Web, WebNames
	If ChoosingWebsite=1
	{
		WebLT:=WebLT ? false : true
		GoSub RSWeb
	}
	FadeOut(WebEdit)
return

RSWebFocused:
	RSWebWithSearchFocused:=true
	GoSub RSWeb
return

StartSearch:
	Gui, Submit, NoHide
	Loop, Parse, websearchvar
	If (A_LoopField="." && !InStr(websearchvar," ") && !FastSearching)
	{
		Run, http:%websearchvar%
		websearchvar=
		GoSub RSWeb
		return
	}
	websearchvar:="https://www.google.bg/search?q=" websearchvar
	Run, %websearchvar%,, UseErrorLevel
	websearchvar=
	GoSub RSWeb
return